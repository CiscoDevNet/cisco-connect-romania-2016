<div align="center">
<h1 style="color: #2155ae">
Cisco Connect 2016 devnet lab guide
</h1>
</div>


<h4 id="Contents">Contents</h4>

*   [1. How to setup your computer](#1. How to setup your computer)
*   [2. Introduction to Spark](#2. Introduction to Spark)
    *   [2.1 What is Spark](#2.1 What is Spark)
    *   [2.2 Sign up for Cisco Spark and take a tour](#2.2 Sign up for Cisco Spark and take a tour)
*   [3. Spark lab exercises](#3. Spark lab exercises)
    *   [3.1 Create a new Spark room](#3.1 Create a new Spark room)
    *   [3.2 Listing Spark rooms you are a member of](#3.2 Listing Spark rooms you are a member of)
    *   [3.3 Adding another user to the new Spark room](#3.3 Adding another user to the new Spark room)
    *   [3.4 Posting a message to the new Spark room](#3.4 Posting a message to the new Spark room)
*   [4. Introduction to APIC-EM](#4. Introduction to APIC-EM)
    *   [4.1 What is APIC-EM](#4.1 What is APIC-EM)
*   [5. APIC-EM lab exercises](#5. APIC-EM lab exercises)
    *   [5.1 Create your authentication ticket](#5.1 Create your authentication ticket)
    *   [5.2 Get the network device list](#5.2 Get the network device list)
    *   [5.3 Get the host list](#5.3 Get the host list)
*   [6. Spark plus APIC-EM lab 2in1](#6. Spark plus APIC-EM lab 2in1)

</br>
</br>
<h3 id="1. How to setup your computer">1. How to setup your computer</h3>

If you are using Cisco-provided hardware at a Cisco event:
*	Lab files are already downloaded under user's working directory: apicem-ga-1.2-ll-sample-code-basic-labs
*	You DO NOT need to change any settings.

If you are working on a different device please visit:
*	[Spark introductory lab] [1]
*	[APIC-EM introductory lab] [2]

[1]: https://learninglabs.cisco.com/lab/collab-spark-message/step/1
[2]: https://learninglabs.cisco.com:8867/lab/apic-em-basic/step/1

In order to run python code open a command line interface and go to the C:\devnet folder.





</br>
<h3 id="2.	Introduction to Spark">2. Introduction to Spark</h3>

<h4 id="2.1 What is Spark">2.1 What is Spark</h4>

[Cisco Spark] [3] is a cloud service providing persistent chat, room-based collaboration, WebRTC video conferencing, and more. Developers can easily integrate solutions with Spark via the [Spark REST API] [4] - for example to add Spark messaging features to an app user interface, or to automate sending Spark messages to rooms based on business system or real-world events.

[3]: https://www.ciscospark.com/
[4]: https://developer.ciscospark.com/getting-started.html

<div align="center">
![Figure](posts/files/ccr-lab01/assets/images/Spark.jpg)
</div>

Application developers integrating with Spark can easily bring messaging capabilities into their applications via a few basic REST requests. In this lab we will launch the Spark web client, then use the Google Chrome based REST test tool [Postman] [5] to execute APIs for creating a new Spark room, adding a participant to the room, and posting a new test message with an attached image file.

[5]: https://www.getpostman.com/


<h4 id="2.2 Sign up for Cisco Spark and take a tour">2.2 Sign up for Cisco Spark and take a tour</h4>

If you already have a Spark account, skip to step 3:  [Spark lab exercises](#3. Spark lab exercises)

1. From the Spark home page at [https://web.ciscospark.com] [] enter your email address, and follow the instructions for creating a Spark account. Note: you will need to access your email account, as Spark will send a 'You have a Cisco Spark account' email message with a 'Create Password' verification link - this must be completed in order to login to Spark.

2.	Log in to Spark and take a quick look around. Feel free to create a new room and invite a friend (note: they will need to complete the email verification step, too.)

3.	For more information on Spark features and benefits, check out [http://www.webex.com/ciscospark/] []

[https://web.ciscospark.com]: https://web.ciscospark.com
[http://www.webex.com/ciscospark/]: http://www.webex.com/ciscospark/







</br>
<h3 id="3. Spark lab exercises">3. Spark lab exercises</h3>

<h4 id="3.1 Create a new Spark room">3.1 Create a new Spark room</h4>

In order to call Spark APIs you need to authenticate with your Spark API Access Token. This token is a permanent ID that uniquely identifies you and can be used to access Spark APIs during exploration and development. In order to retrieve your Spark API Access Token.
*	Open a browser tab, navigate to the [developer.ciscospark.com] [], and Login
*	Click on your profile image
*	Click Copy to copy your access token to the clipboard

[developer.ciscospark.com]: developer.ciscospark.com

<div align="center">
![Figure](posts/files/ccr-lab01/assets/images/Spark_profile.jpg)
</div>


In order to complete the exercise:
*	Open PyCharm and explore the code of the “Create_a_new_Spark_room.py”.
*	Fill in the room name with your “***firstname_familyname***” format.
*	Fill in the 'authorization': "Bearer ***access_token***" line where the access_token is your Access Token that you copied to clipboard in the previous step
*	Go to the command line and run ***“py -3 Create_a_new_Spark_room.py”***


<h4 id="3.2 Listing Spark rooms you are a member of">3.2 Listing Spark rooms you are a member of</h4>

In order to complete the exercise:
*	Open PyCharm and explore the code of the “Listing_Spark_rooms_you_joined.py” file
*	Fill in the 'authorization': "Bearer ***access_token***" line where the access_token is your Access Token that you copied to clipboard in the previous step
*	Go to the command line and run ***“py -3 Listing_Spark_rooms_you_joined.py”***


<h4 id="3.3 Adding another user to the new Spark room">3.3 Adding another user to the new Spark room</h4>

In order to complete the exercise:
*	Open PyCharm and explore the code of the “Add_user_to_Spark_room.py” file
*	Fill in the 'authorization': "Bearer ***access_token***" line where the access_token is your Access Token that you copied to clipboard in the previous step
*	Fill in the room_id = ***room_id*** line with the id of the room you created at the previous steps
*	You could also modify the new user but in order for us to verify your exercise please do not make any modification to this field.
*	Go to the command line and run ***“py -3 Add_user_to_Spark_room.py”***

<h4 id="3.4 Posting a message to the new Spark room">3.4 Posting a message to the new Spark room</h4>

In order to complete the exercise:
*	Open PyCharm and explore the code of the “Post_a_message_to_Spark_room.py” file
*	Fill in the 'authorization': "Bearer ***access_token***" line where the access_token is your Access Token that you copied to clipboard in the previous step
*	Fill in the room_id = ***room_id*** line with the id of the room you created at the previous steps
*	Fill in the text_id = ***your_feedback*** line with your feedback regarding Spark and this lab so far
*	Go to the command line and run ***“py -3 Post_a_message_to_Spark_room.py”***

<div align="center">
<h3 style="color: #2155ae">
Congratulations! You have successfully completed the Spark lab!
</h3>
</div>



</br>
<h3 id="4. Introduction to APIC-EM">4. Introduction to APIC-EM</h3>

<h4 id="4.1 What is APIC-EM">4.1 What is APIC-EM</h4>

The Cisco® Application Policy Infrastructure Controller - Enterprise Module (APIC-EM) is our software-defined networking (SDN) controller for enterprise networks (in the campus or branch and the WAN). It delivers an elastic platform for policy-based automation that simplifies and abstracts the network. It can enable transformation of business intent to network control. The platform is built to host multiple, easy-to-use SDN applications that use open, northbound representational state transfer (REST) APIs and drive core network automation solutions. The platform also supports a number of southbound protocols that enable it to communicate with the breadth of network devices customers already have in place, and extend SDN benefits to both greenfield and brownfield environments, immediately from the start. The goal of the APIC-EM platform is to power next-generation SDN applications that will dramatically lower operational expenditures and increase network agility to align with business needs.

The APIC-EM Controller provides REST-based API access to Enterprise, WAN and Campus networks. Network programmability and automated network control helps IT to respond more rapidly to changing network conditions and related business opportunities.
The APIC-EM has a southbound interface that speaks directly to the network control plane. Southbound interfaces are not exposed directly but are used to execute the commands that you specify with via the Northbound (NB) REST API. Thus, you can use the Northbound REST API to APIC-EM to develop your own custom controller or to add dynamic SDN functionality directly into your own applications.

<div align="center">
![Figure](posts/files/ccr-lab01/assets/images/APIC-EM.jpg)
</div>

The speed, flexibility and customization options provided by the APIC-EM is without precedent in the enterprise LAN. Several applications have already been developed (Cisco IWAN deployment interface, Plug-and-Play, Path Trace, Easy QoS etc) and more will come soon. On top of existing modules, integrators and customers have the environment and tools that enable them to develop their own applications.


</br>
<h3 id="5. APIC-EM lab exercises">5. APIC-EM lab exercises</h3>

<h4 id="[5.1 Create your authentication ticket">5.1 Create your authentication ticket</h4>

The Role-Based Access Control (RBAC) mechanism on the Cisco APIC-EM assigns exactly one security role to every user account. The role associated with the account determines the set of resources and operations that are available to the account. The GA release of Cisco APIC-EM defines the following roles and privileges.
*	Administrator (ROLE_ADMIN) — Provides full administrative privileges to all Cisco APIC-EM resources, including the ability to add or remove users and accounts.
*	Policy Administrator (ROLE_POLICY_ADMIN) — Allows you to create and manage policies.
*	Observer (ROLE_OBSERVER) — Provides primarily read-only privileges to the Cisco APIC-EM.
*	Installer (ROLE_INSTALLER) — Allows an installer to use the Cisco Plug and Play Mobile App to remotely access the APIC-EM controller to deploy devices and view their status. An installer cannot directly access the Cisco APIC-EM GUI.

A security token known as a service ticket encapsulates user identity and role information as a single value that RBAC-governed APIs use to make access-control decisions. You must create and provide a service ticket!

Virtually all NB REST requests to the Cisco APIC-EM must supply a service ticket. The noteworthy exception to this rule is the request that actually generates a service ticket. The POST /ticket request bases its access-control decision on the username and password supplied as its arguments; successful authentication generates a service ticket that encapsulates the role associated with the authenticated user account
To get a new service ticket we need to use POST /ticket API. This POST request needs to provide APIC-EM username and password as input in JSON format. The username and password is the same as the one used to login to APIC-EM Controller Graphic User Interface (GUI).

In order to complete the exercise:
*	Open PyCharm and explore the code of the “apicem_post_ticket.py”.
*	Replace the ***username_value*** with “devnetuser”
*	Replace the ***password_value*** with “Cisco123!”
*	Go to the command line and run ***“py -3 apicem_post_ticket.py”***



<h4 id="5.2 Get the network device list">5.2 Get the network device list</h4>

You can use the NB REST API to retrieve detailed information about network devices, such as IOS configuration, interface information and more. In this session, we will use network-device related APIs to create an application that let the user select a network device and view its IOS configuration. Then we will add more functionality to this application.
Our application will use the following NB REST APIs:

*	GET /network-device
*	GET /network-device/{networkDeviceId}/config
*	GET /interface/network-device/{deviceId}

The Cisco APIC-EM assigns a unique ID to every network device. You can pass this ID to a variety of network-device related APIs to retrieve information about a specific device.
NOTE: In order to manage network devices, the network scanning application built into the Cisco APIC-EM controller has to "discover" those physical devices on a live network. The scanning application is accessible by means of the Discovery icon in the Cisco APIC-EM GUI or by means of the POST /discovery REST API.
The Cisco APIC-EM controller in the Always-On Sandbox is pre-populated with the results of a previous discovery, so this lab does not discuss Discovery.
In order to display a list of network devices to the user, we need to retrieve network device information by issuing the GET /network-device request. The response body returns a list of network devices. Each block in the response provides information about a single device, including its network device name, IP, type, network-device id and more.

In order to complete the exercise:
*	Open PyCharm and explore the code of the “apicem_get_network_device_list.py”.
*	Replace:
-	***item1*** with “hostname"
-	***item2*** with “managementIpAddress"
-	***item3*** with “type"
-	***item4*** with "id"
*	Go to the command line and run ***“py -3 apicem_get_network_device_list.py”***


<h4 name="5.3 Get the host list">5.3 Get the host list</h4>

The network-scanning application classifies each network element that it discovers as a network-device or as a host. A network-device is part of the network traffic-management infrastructure, while a host is not part of the traffic-management infrastructure. For example, switches, routers, access points and wireless LAN controllers are network devices. A laptop connected to a switch is a host, as is an IP phone connected to a wireless LAN controller. A host can be discovered via CDP/LLDP/IP Device Tracking or SNMP Traps (only for wireless hosts).
Like the network-device API we explored in the previous exercise, the host API provides a way to get information about network elements; however, the host API interacts with hosts, rather than with the devices that the network-device API manages. Both APIs are commonly used by many applications. In this session, we'll use the host API to get some host information.
Just as the /network-device API can be used to retrieve device information, the /host API can be used to get detailed information about hosts in Inventory. For example, you can use the host API to get the name of a host, the ID of the VLAN that the host uses, the IP address of the host, the MAC address of the host, the IP address of the network device to which host is connected, and more.


In order to complete the exercise:
*	Open PyCharm and explore the code of the “apicem_get_host.py”.
*	Replace:
-	***item1*** with “hostIp"
-	***item2*** with “hostType"
-	***item3*** with “connectedNetworkDeviceIpAddress "
*	Go to the command line and run “py -3 apicem_get_host.py”

<div align="center">
<h3 style="color: #2155ae">
Congratulations! You have successfully completed the APIC-EM lab!
</h3>
</div>



</br>
<h3 id="6. Spark plus APIC-EM lab 2in1">6. Spark plus APIC-EM lab 2in1</h3>

And now let us try something a little bit more complex. Let’s assume that a manager needs some data from a device. The days in which he used Telnet and SSH are long gone. Now he wishes to use his tablet with a collaboration tool in order to access the data.
Our program will use APIC-EM to fetch all the devices in the network. He will choose the device he wishes to see the configuration of. The steps that the program will fulfill:
1.	Automatically create a new Spark room
2.	Automatically add the manager to the new Spark room
3.	Query APIC-EM and list in the Spark room the devices in your network
4.	Ask the manager to select the device he wishes to see the configuration of (and post his option in the Spark room). If someone else except the manager posts the answer in the Spark room it does not work
5.	The manager posts his option in the Spark room.
6.	The program interrogates the APIC-EM and fetches the configuration of the respective device.
7.	The configuration is posted in the Spark room and the manager is happy 

In order to complete the exercise:
*	Open PyCharm and explore the code of the “Spark&APIC-EM.py”.
*	Replace the ***supervisor_email*** with the email address you get from the supervisor (ask the supervisor for it)
*	Replace the ***firstname_familyname_finished_the_challange*** with your personal information regarding the first name and the family name
*	Find the line where the correct operator is missing and replace the ***correct_operator*** text in the respective line with the correct operator. TIP: choose between ***"and"***, ***"or"*** and ***"xor"***.
*	Go to the command line and run ***“py -3 Spark&APIC-EM.py”***



<div align="center">
<h3 style="color: #2155ae">
Congratulations! You have successfully completed the 2in1 lab!
</h3>
</div>



<div align="center">
<h2 style="color: #2155ae">
We would really appreciate your feedback. Please ask the Supervisor to add you to our special room for people that completed the lab and let us know your thoughts.
</h2>
</div>
